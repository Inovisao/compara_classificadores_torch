# Testado em Fev/2024
# Config: Dell Precision 3660, Nvidia RTX A4000, Ubuntu 22.04.3
# Pistori

conda create --yes -c pytorch -c conda-forge --name cla_torch pytorch torchvision cudatoolkit scikit-learn pandas matplotlib numpy seaborn  

conda activate cla_torch

pip install --no-input ml_collections timm tifffile omnixai opencv-python-headless wget torchmetrics

# Para instalar as dependência dos códigos em R
# use o comando abaixo (não inclui instalação do próprio R)

sudo apt-get install libfontconfig1-dev
Rscript install_R_packages.R 






# DAQUI PARA BAIXO ESTÁ DESATUALIZADO ... TALVEZ SEJA MELHOR APAGAR
# DEPOIS QUE CONFERIR SE NÃO TEM NADA ÚTIL


O próximo que for instalar, antes de rodar o que tem aqui, tente usar o seguinte comando:

conda env create -f environment.yml

O objetivo é que ele instale o conteúdo de environment.yml automaticamente e reduza o problema com versões.
Se funcionar, avise neste arquivo.
Se não funcionar, tente encontrar o que deu errado.
Se não funcionar, uma possibilidade é que seja um problema com o driver da GPU. Estou usando a versão 510.108.03, com CUDA 11.6.
>>> NÃO VAI FUNCIONAR PRO R: depois precisamos de um arquivo só pra ele.

# Para instalar as dependências 
# COPIE E COLE OS COMANDOS ABAIXO NO TERMINAL
# NÃO FUNCIONA RODANDO O SCRIPT (AINDA).
# Criar um ambiente conda.
conda create --name cla_torch
conda activate cla_torch

# Não testei com outras versões do pytorch.
conda install pytorch==1.12.1 torchvision==0.13.1 torchaudio==0.12.1 cudatoolkit=11.6 -c pytorch -c conda-forge

# O de sempre.
conda install -c conda-forge scikit-learn pandas matplotlib numpy seaborn opencv
pip install timm tifffile omnixai

# É preciso instalar também um monte de pacotes para rodar o graficos.R
# Uma dica é tentar instalar o rstudio e abrir lá o graficos.R (ele já
# vai oferecer para instalar as dependências). Dando pau (o mais provável)
# terá que fazer umas instalações por favor também :-( 
# Na minha máquina (Ubuntu 22.04) precisei rodar estes comandos
# no terminal do Linux para conseguir tirar todos os erros que apareciam
# durante a instação dos pacotes no rstudio

sudo apt-get update
sudo apt-get install curl libxml2-dev libcurl4-openssl-dev cmake libfontconfig1-dev 

# O comando para instalar pacotes de dentro do rstudio é este aqui
install.packages("kableExtra")


